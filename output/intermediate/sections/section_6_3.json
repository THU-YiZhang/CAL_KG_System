{
  "section_num": "6.3",
  "title": "Class AB差分输入级",
  "start_line": 3999,
  "end_line": 4110,
  "content": "### 6.3 Class AB 差分输入级\n互补推挽放大不但可用于输出级以提高负载驱动能力,同样也可用于输入级以提高小信号增益, 降低非线性失真。因此, 互补推挽差分电路在合理的静态工作点下, 可构成高线性电路, 如 Class A, 高效率电路如 Class B, 效率与线性兼顾的电路如 Class AB 等多种模式的差分输入增益电路。\n构造两个类型互补的 CS 放大器,其中 NMOS CS 电路输入接 ${V}_{\\mathrm{i}}^{ + }/{V}_{\\mathrm{i}}^{ - }$ 信号,输出驱动 PMOS负载,而 PMOS CS 的输入接 ${V}_{\\mathrm{i}}^{ - }/{V}_{\\mathrm{i}}^{ + }$ 信号,输出驱动 NMOS 负载,构成如图 6-7 所示的对称电路结构。在单一的 CS 电路中, 由于仅传输变化电流到输出级的一个放大器, 而负载为恒定偏置,则可构成常规的 Class A 电压放大级。两路互补 CS 即可构成 Class A 的差分输入级互补驱动,要求电流镜传输同极性电压信号驱动 $\\mathrm{N}/\\mathrm{P}$ 输出 $\\mathrm{{MOS}}$ 管。显然,单一的 CS 结构无法满足这些要求。\n以上两模块的输出电流镜相互交叉耦合驱动输出恒流管,则构成全差分 Class A 放大结构；互补 $\\mathrm{{CS}}$ 电路也可相互提供对方同型负载驱动电压,即将图 6-7 中 ${V}_{\\mathrm{{bn}}}$ 改为 ${\\mathrm{M}}_{10}$ 栅压驱动, ${V}_{\\mathrm{{bp}}}$ 改为 ${\\mathrm{M}}_{11}$ 栅压驱动,即可构成全差分互补推挽 Class A 输入级电路。\n![0196aaa2-bbe2-70ee-823d-d4abf5c67805_152_175_851_1211_479_0.jpg](images/0196aaa2-bbe2-70ee-823d-d4abf5c67805_152_175_851_1211_479_0.jpg)\n图 6-7 全差分 Class A 输入级\n以上推挽差分放大器仅考虑了交流信号的相互关系和作用, 而没有考虑直流静态点的关系。 ${\\mathrm{M}}_{1}$ 和 ${\\mathrm{M}}_{3}$ 的静态偏置点不同,若 ${\\Delta }_{\\mathrm{n}} = {\\Delta }_{\\mathrm{p}} = \\Delta ,{\\mathrm{M}}_{1}$ 的栅压相对地至少为 ${V}_{\\mathrm{{GN}}} > 2{V}_{\\mathrm{{TN}}}$ $+ {3\\Delta }$ ,而 ${\\mathrm{M}}_{3}$ 相对于 ${V}_{\\mathrm{{CC}}}$ 的偏置至少为 ${V}_{\\mathrm{{GP}}} > 2{V}_{\\mathrm{{TP}}} + {3\\Delta }$ 。通常情况下, ${V}_{\\mathrm{{GN}}} \\neq  {V}_{\\mathrm{{GP}}}$ ,且由于 ${\\mathrm{M}}_{3}$ 管的 ${V}_{\\mathrm{{ds}}}$ 上承受了较大的电压变化范围,一般有 ${V}_{\\mathrm{{GN}}} \\gg  {V}_{\\mathrm{{GP}}}$ 。对于 ${\\mathrm{M}}_{2}$ 和 ${\\mathrm{M}}_{4}$ 管的栅压偏置也存在相同的问题。因此,如将图 6-7 中 ${\\mathrm{M}}_{1}/{\\mathrm{M}}_{3}$ 的 ${V}_{\\mathrm{i}}^{ + }$ 直接相连, ${\\mathrm{M}}_{2}/{\\mathrm{M}}_{4}$ 的 ${V}_{\\mathrm{i}}^{ - }$ 直接相连,根据电路的结构对称性以及饱和工作点的限制要求,在低电源电压条件下,即 ${V}_{\\mathrm{{CC}}}$ 略大于 ${V}_{\\mathrm{{TN}}} + {V}_{\\mathrm{{TP}}}$ 的范围内,无论 ${V}_{\\mathrm{i}}$ 信号共模静态点的高低,两条互补驱动支路中总有一个支路电流截止, 另一个支路导通。即使输入共模信号位于中间电平附近也是如此, 电路只能处于 Class B 的工作模式。只有在很高的电源电压驱动下,且输入共模信号 ${V}_{\\mathrm{{ic}}}$ 位于 ${V}_{\\mathrm{{CC}}}/2$ 附近时,才有可能进入 Class AB 甚至 Class A 的工作模式。为了在任何电源电压下都能有效地构造 Class A 或 Class AB 的差分输入电路,必须采用直流电平移位电路,以此保证 ${\\mathrm{M}}_{1}/{\\mathrm{M}}_{3}$ 以及 ${\\mathrm{M}}_{2}/{\\mathrm{M}}_{4}$ 对管的交流输入信号相同性质,同时配置合适且分离的直流电平工作点。\n采用源跟随的直流电平移位,使 ${V}_{\\mathrm{{GN}}}$ 比 ${V}_{\\mathrm{{GP}}}$ 近似高出 ${V}_{\\mathrm{{LS}}} = {V}_{\\mathrm{{TN}}} + {V}_{\\mathrm{{TP}}} + {2\\Delta }$ 的直流电平, 并通过调节 ${V}_{\\mathrm{{LS}}}$ 电平即过驱动电压的大小,控制静态电流的具体数值。通常,静态电流控制在较低的水平,构成 Class AB 驱动模式。由于互补驱动,在任何一个变化方向上,输出电流的变化幅度可远远超出静态偏置电流, 负载驱动能力显著提高。该结构的另外一个重要特点是可构成对称的全差分结构,因此可以利用结构上的对称性消除非线性失真,大幅度提高差分对的线性输入范围。基于 CS 源极耦合的 Class AB 差分对,除了具有互补推挽放大结构所固有的高增益、高压摆率(SR)、宽的动态范围、大的负载电流驱动能力和大信号瞬态响应速度等优势外,由于其结构上的完全对称性,还具有抑制电路非线性、扩展线性范围等特点。以下将从电流模式及电压模式两个视角,具体分析电路的性能。\n图 6-8 中, ${I}_{\\mathrm{{SS}}}$ 恒流源将提供交叉互补 $\\left( {\\mathrm{N}\\text{ 和 }\\mathrm{P}}\\right)$ 差分对管的 ${V}_{\\mathrm{{GS}}}$ 电压和固定偏置。当 ${V}_{i1}$ 增加、 ${V}_{i2}$ 减小时, ${V}_{i1}$ 下对应的 MOS 二极管电位抬升,而 ${V}_{i2}$ 下对应的 MOS 二极管电位下降,造成 ${I}_{\\mathrm{D}1}$ 支路中两个互补 $\\mathrm{{MOS}}$ 管 ${V}_{\\mathrm{{GS}}}$ 电压和增加, ${I}_{\\mathrm{D}1}$ 上升,同时 ${I}_{\\mathrm{D}2}$ 支路中两个互补 MOS 管 ${V}_{\\mathrm{{GS}}}$ 电压和减小,因此 ${I}_{\\mathrm{D}2}$ 可减小到 0 。 ${I}_{\\mathrm{D}1}$ 由于随 ${V}_{\\mathrm{i}1} - {V}_{\\mathrm{i}2}$ 的增加而平方增加,没有上限,适合大信号对压摆率的要求。同样,当差分信号变化相反时, ${I}_{\\mathrm{D}1}$ 减小、 ${I}_{\\mathrm{D}2}$ 增加。业已证明, ${I}_{\\mathrm{D}1}$ 和 ${I}_{\\mathrm{D}2}$ 与差分输入电压分别都具有较强的非线性,但电流的差分输出则与差模电压具有良好的线性关系。\n![0196aaa2-bbe2-70ee-823d-d4abf5c67805_153_232_890_1065_462_0.jpg](images/0196aaa2-bbe2-70ee-823d-d4abf5c67805_153_232_890_1065_462_0.jpg)\n图 6-8 源极耦合对差分放大结构\n设所有 MOS 管均工作于强反型饱和区,且同类型 MOS 管的 $W/L$ 相同,则固定偏置为\n$$\n{V}_{\\text{bias }} = {V}_{\\mathrm{{GSN}}} + {V}_{\\mathrm{{SGP}}} = \\sqrt{2{I}_{\\mathrm{{SS}}}}\\left( {\\frac{1}{\\sqrt{{k}_{\\mathrm{n}}}} + \\frac{1}{\\sqrt{{k}_{\\mathrm{p}}}}}\\right)  + {V}_{\\mathrm{{TN}}} + {V}_{\\mathrm{{TP}}} \\tag{6-2}\n$$\n设 ${I}_{\\mathrm{{Dl}}}$ 支路中 $\\mathrm{N}/\\mathrm{P}$ 两管共源端电位为 ${V}_{\\mathrm{x}}$ ,则两管中相同的饱和电流可表示为\n$$\n\\left. \\begin{array}{l} {I}_{\\mathrm{{Dl}}} = \\frac{1}{2}{k}_{\\mathrm{n}}{\\left( {V}_{\\mathrm{i}1} - {V}_{\\mathrm{x}} - {V}_{\\mathrm{{TN}}}\\right) }^{2} \\\\  {I}_{\\mathrm{{Dl}}} = \\frac{1}{2}{k}_{\\mathrm{p}}{\\left\\lbrack  {V}_{\\mathrm{x}} - \\left( {V}_{\\mathrm{i}2} - {V}_{\\mathrm{{bias}}}\\right)  - {V}_{\\mathrm{{TP}}}\\right\\rbrack  }^{2} \\end{array}\\right\\}   \\tag{6 - 3}\n$$\n由此解得 ${V}_{\\mathrm{x}}$ 应满足的约束条件为\n$$\n\\left. \\begin{array}{l} {V}_{\\mathrm{x}} = {V}_{\\mathrm{{iI}}} - {V}_{\\mathrm{{TN}}} - \\sqrt{2{I}_{\\mathrm{{DI}}}/{k}_{\\mathrm{n}}} \\\\  {V}_{\\mathrm{x}} = \\sqrt{2{I}_{\\mathrm{{DI}}}/{k}_{\\mathrm{p}}} + {V}_{\\mathrm{{i2}}} - {V}_{\\text{bias }} + {V}_{\\mathrm{{TP}}} \\end{array}\\right\\}   \\tag{6 - 4}\n$$\n由上式 ${V}_{\\mathrm{x}}$ 关系得到\n$$\n\\sqrt{2{I}_{\\mathrm{D}1}}\\left( {\\frac{1}{\\sqrt{{k}_{\\mathrm{n}}}} + \\frac{1}{\\sqrt{{k}_{\\mathrm{p}}}}}\\right)  = {V}_{\\mathrm{i}1} - {V}_{\\mathrm{i}2} + {V}_{\\mathrm{{bias}}} - {V}_{\\mathrm{T}\\mathrm{N}} - {V}_{\\mathrm{{TP}}} \\tag{6 - 5}\n$$\n代入 ${V}_{\\text{bias }}$ 的偏置条件后,得\n$$\n\\sqrt{2{I}_{\\mathrm{{Dl}}}}\\left( {\\frac{1}{\\sqrt{{k}_{\\mathrm{n}}}} + \\frac{1}{\\sqrt{{k}_{\\mathrm{p}}}}}\\right)  = {V}_{\\mathrm{i}1} - {V}_{\\mathrm{i}2} + \\sqrt{2{I}_{\\mathrm{{SS}}}}\\left( {\\frac{1}{\\sqrt{{k}_{\\mathrm{n}}}} + \\frac{1}{\\sqrt{{k}_{\\mathrm{p}}}}}\\right)  \\tag{6 - 6}\n$$\n整理后得到的支路电流为\n$$\n{I}_{\\mathrm{D}1} = \\frac{1}{2}{\\left\\lbrack  \\frac{\\sqrt{{k}_{\\mathrm{n}}}\\sqrt{{k}_{\\mathrm{p}}}}{\\sqrt{{k}_{\\mathrm{n}}} + \\sqrt{{k}_{\\mathrm{p}}}}\\left( {V}_{\\mathrm{i}1} - {V}_{\\mathrm{i}2}\\right)  + \\sqrt{2{I}_{\\mathrm{{SS}}}}\\right\\rbrack  }^{2} \\tag{6 - 7}\n$$\n根据电路的对称性结构,同理可得 ${I}_{\\mathrm{D}2}$ 的支路电流为\n$$\n{I}_{\\mathrm{D}2} = \\frac{1}{2}{\\left\\lbrack  \\frac{\\sqrt{{k}_{\\mathrm{n}}}\\sqrt{{k}_{\\mathrm{p}}}}{\\sqrt{{k}_{\\mathrm{n}}} + \\sqrt{{k}_{\\mathrm{p}}}}\\left( {V}_{\\mathrm{i}2} - {V}_{\\mathrm{i}1}\\right)  + \\sqrt{2{I}_{\\mathrm{{SS}}}}\\right\\rbrack  }^{2} \\tag{6 - 8}\n$$\n显然,当 ${V}_{\\mathrm{i}\\mathrm{d}} = {V}_{\\mathrm{i}1} - {V}_{\\mathrm{i}2} = 0$ 时,差分电流 $\\Delta {I}_{\\mathrm{D}} = 0$ 。当 ${V}_{\\mathrm{i}\\mathrm{d}} = {V}_{\\mathrm{i}1} - {V}_{\\mathrm{i}2} \\gg  0$ 时, ${I}_{\\mathrm{D}1} > 0$ 且无上限,但 ${I}_{\\mathrm{D}2}$ 有下限,其最小值显然为 0,此时对应的差分输入电压为\n$$\n{V}_{\\mathrm{{id}},\\max } = {V}_{\\mathrm{i}1} - {V}_{\\mathrm{i}2} = \\left( {\\frac{1}{\\sqrt{{k}_{\\mathrm{n}}}} + \\frac{1}{\\sqrt{{k}_{\\mathrm{p}}}}}\\right) \\sqrt{2{I}_{\\mathrm{{SS}}}} \\tag{6 - 9}\n$$\n当 ${V}_{\\mathrm{i}\\mathrm{d}} = {V}_{\\mathrm{i}1} - {V}_{\\mathrm{i}2} \\ll  0$ 时,结论相反, ${I}_{\\mathrm{D}2} > 0$ 且无上限, ${I}_{\\mathrm{D}1}$ 有下限,其最小值为零,此时对应的差分输入电压为\n$$\n\\left| {V}_{\\mathrm{{id}},\\max }\\right|  =  - \\left( {{V}_{\\mathrm{{il}}} - {V}_{\\mathrm{i}2}}\\right)  = \\left( {\\frac{1}{\\sqrt{{k}_{\\mathrm{n}}}} + \\frac{1}{\\sqrt{{k}_{\\mathrm{p}}}}}\\right) \\sqrt{2{I}_{\\mathrm{{SS}}}} \\tag{6 -10}\n$$\n显然, ${I}_{\\mathrm{D}1}$ 和 ${I}_{\\mathrm{D}2}$ 电流均不为零的最大差分输入电压即由上式 $\\left| {V}_{\\mathrm{{id}},\\max }\\right|$ 给出,此特性即表现为 Class AB 的输出特性。输出电流本身虽然仍具有强烈的非线性, 但在结构完全匹配的条件下,由于非线性因子的完全抵消,则差分输出电流 $\\Delta {I}_{\\mathrm{{DS}}} = {I}_{\\mathrm{{DI}}} - {I}_{\\mathrm{{DZ}}}$ 为理想的线性增益关系,即\n$$\n\\Delta {I}_{\\mathrm{D}} = \\frac{1}{2}\\left( {2\\sqrt{2{I}_{\\mathrm{{SS}}}}}\\right) \\left\\lbrack  {\\frac{\\sqrt{{k}_{\\mathrm{n}}}\\sqrt{{k}_{\\mathrm{p}}}}{\\sqrt{{k}_{\\mathrm{n}}} + \\sqrt{{k}_{\\mathrm{p}}}}2\\left( {{V}_{\\mathrm{i}1} - {V}_{\\mathrm{i}2}}\\right) }\\right\\rbrack   = 2\\sqrt{2{I}_{\\mathrm{{SS}}}}\\frac{\\sqrt{{k}_{\\mathrm{n}}}\\sqrt{{k}_{\\mathrm{p}}}}{\\sqrt{{k}_{\\mathrm{n}}} + \\sqrt{{k}_{\\mathrm{p}}}}{V}_{\\mathrm{{id}}}\\left( {6 - {11}}\\right)  \\tag{6-11}\n$$\n因此,该差分对的线性工作范围就是电路的最大工作范围,而动态范围可以通过 Class AB 静态工作点电流提高而适当增加。在此动态范围内, ${I}_{\\mathrm{D}1}$ 与 ${I}_{\\mathrm{D}2}$ 经过线性电流镜传递到输出, 其差值电流在输出负载上形成电压, 以图 6-9 为例, 得到的单端电压增益为\n$$\n{A}_{\\mathrm{v}} = \\frac{\\left( {{g}_{\\mathrm{m}9}/{g}_{\\mathrm{m}5}}\\right) \\Delta {I}_{\\mathrm{D}}\\left( {{r}_{\\mathrm{o}9}//{r}_{\\mathrm{o}{10}}}\\right) }{{V}_{\\mathrm{{id}}}} = 2\\sqrt{2{I}_{\\mathrm{{SS}}}}\\frac{\\sqrt{{k}_{\\mathrm{n}}}\\sqrt{{k}_{\\mathrm{p}}}}{\\sqrt{{k}_{\\mathrm{n}} + \\sqrt{{k}_{\\mathrm{p}}}}}\\frac{{g}_{\\mathrm{m}9}}{{g}_{\\mathrm{m}5}}\\left( {{r}_{\\mathrm{o}9}//{r}_{\\mathrm{o}{10}}}\\right)  \\tag{6 - 12}\n$$\n从电压模的观点进行分析,对 ${V}_{\\mathrm{i}1}$ 和 ${V}_{\\mathrm{i}2}$ 作用采用叠加原理, ${V}_{\\mathrm{i}1}$ 输入而 ${V}_{\\mathrm{i}2} = 0$ ,或 ${V}_{\\mathrm{i}2}$ 输入而 ${V}_{i1} = 0$ ,对两者叠加,则为 ${V}_{i1}$ 和 ${V}_{i2}$ 都起作用时的增益。由于 ${V}_{i1}$ 与 ${V}_{i2}$ 为差分信号,因此差分增益是单一输入下的两倍。\n以 ${V}_{i1}$ 输入 ${V}_{i2} = 0$ 为例子,输入 ${V}_{i1}$ 首先由 ${M}_{1}$ 源跟随,再经 ${M}_{3}$ 管的 ${CG}$ 放大,最后再经过 ${\\mathrm{M}}_{9}\\mathrm{{CS}}$ 放大,得到输出 ${V}_{\\mathrm{o}}$ ,则增益的绝对值近似为\n$$\n{A}_{\\mathrm{v}} = 2\\frac{{g}_{\\mathrm{{ml}}}\\left( {1/{g}_{\\mathrm{m}3}}\\right) }{1 + {g}_{\\mathrm{{ml}}}\\left( {1/{g}_{\\mathrm{m}3}}\\right) }{g}_{\\mathrm{m}3}\\frac{1}{{g}_{\\mathrm{m}5}}{g}_{\\mathrm{m}9}{r}_{\\mathrm{o}} = 2\\frac{{g}_{\\mathrm{m}1}}{1 + {g}_{\\mathrm{m}1}/{g}_{\\mathrm{m}3}}\\frac{{g}_{\\mathrm{m}9}}{{g}_{\\mathrm{m}5}}\\left( {{r}_{\\mathrm{o}9}//{r}_{\\mathrm{o}{10}}}\\right)  \\tag{6-13}\n$$\n${V}_{\\mathrm{i}1} = {V}_{\\mathrm{i}2} = 0$ 的静态下 ${I}_{\\mathrm{D}} = {I}_{\\mathrm{{SS}}}$ ,则 ${g}_{\\mathrm{m}1} = \\sqrt{2{k}_{\\mathrm{n}}{I}_{\\mathrm{{SS}}}},{g}_{\\mathrm{m}3} = \\sqrt{2{k}_{\\mathrm{p}}{I}_{\\mathrm{{SS}}}}$ ,则有\n$$\n\\frac{{g}_{\\mathrm{{ml}}}}{1 + {g}_{\\mathrm{{ml}}}/{g}_{\\mathrm{m}3}} = \\frac{\\sqrt{2{k}_{\\mathrm{n}}{I}_{\\mathrm{{SS}}}}}{1 + \\sqrt{{k}_{\\mathrm{n}}}/\\sqrt{{k}_{\\mathrm{p}}}} = \\sqrt{2{I}_{\\mathrm{{SS}}}}\\frac{\\sqrt{{k}_{\\mathrm{n}}}\\sqrt{{k}_{\\mathrm{p}}}}{\\sqrt{{k}_{\\mathrm{n}}} + \\sqrt{{k}_{\\mathrm{p}}}} \\tag{6 - 14}\n$$\n![0196aaa2-bbe2-70ee-823d-d4abf5c67805_155_413_596_703_504_0.jpg](images/0196aaa2-bbe2-70ee-823d-d4abf5c67805_155_413_596_703_504_0.jpg)\n图 6-9 推挽驱动输入差分对单端输出\n将以上两式合并后,得到与式(6 - 11)相同的增益表达式,殊途同归。图 6-9 和图 6- 10 分别给出了一种单端输出与全差分 Cascode 输出的 Class AB 单级推挽放大电路。全差分结构中需要附加的共模反馈 CMFB 电路, CMFB 电路结构设计将在全差分运放中详细讨论。\n![0196aaa2-bbe2-70ee-823d-d4abf5c67805_155_220_1387_1101_594_0.jpg](images/0196aaa2-bbe2-70ee-823d-d4abf5c67805_155_220_1387_1101_594_0.jpg)\n图 6-10 一种全差分 Cascode Class AB 单级放大器"
}