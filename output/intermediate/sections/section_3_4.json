{
  "section_num": "3.4",
  "title": "电流镜互偏结构",
  "start_line": 1401,
  "end_line": 1524,
  "content": "### 3.4 电流镜互偏结构\n#### 3.4.1 互偏置原理\n图 3-5 给出的基本 ${V}_{\\mathrm{{TH}}}$ 偏置电路无法完全解决支路电流随电源电压变化的问题,其根源在于输入支路串联分压电阻 $R$ 感应电源 ${V}_{\\mathrm{{CC}}}$ 的变化,使电阻上的电流随之改变,并引起输出电流的非线性变化,最终导致 ${I}_{\\mathrm{{in}}} = {I}_{\\mathrm{o}}$ 的条件无法在很宽的电源电压变化范围内维持,难以获得与 ${V}_{\\mathrm{{CC}}}$ 无关的恒流特性。为了彻底解决电流的电源电压相关性,有必要提高 ${R}_{1}$ 交直流阻抗。\n采用恒流源代替 ${R}_{1}$ 是一种必然的选择。从静态特性看,当恒流源两端的输出电压 ${V}_{\\mathrm{{DS}}}$ 变化时,输出电流 ${I}_{\\mathrm{{DS}}}$ 保持不变,等效于输出直流阻抗变化。恒流源直流阻抗的变化,使得当直流电源电压改变时,通过恒流源直流电阻相应的变化调节直流电阻的分压比,保持输出电压恒定。另一方面,根据恒流源的恒流特性,只要保持饱和恒流区的性质,支路电流必然保持恒定, 与电源电压近似无关, 而恒定的电流在 MOS 二极管低阻上必然形成稳定的直流偏压输出。\n从交流小信号的动态特性看,偏置电路的恒流原理可类比于 MOS 管饱和恒流控制的物理机制。在饱和单管恒流源中,随着其漏电位的不断增加, ${V}_{\\mathrm{{DS}}}$ 中超出夹断电压的过量部分全部降落在耗尽区的高阻层上,沟道电阻两端的电压基本不随 ${V}_{\\mathrm{{DS}}}$ 变化,保持 ${V}_{\\mathrm{{GS}}} - {V}_{\\mathrm{{TH}}}$ 恒定。由于沟道电阻上的压降不变,沟道电阻不变,通过高阻耗尽区的载流子收集,便可保持沟道电流的恒定不变。实际上,由于沟道有效长度受到 ${V}_{\\mathrm{{DS}}}$ 电流的调制, ${V}_{\\mathrm{{DS}}}$ 增加使耗尽区展宽,沟道长度减小,沟道饱和略有增加,表现出有限的输出饱和阻抗。与此相对应,为提高偏置电路的 PSRR, 偏置支路应采用交流高阻与交流低阻相互配合的控制结构。在此条件下, 电源电压的变化量几乎全部降落在高阻上, 而低阻上的压降基本保持不变, 从而确保支路电流的恒定。\n以上分析结果表明,无论从静态交流还是动态交流特性两方面考察,与电源电压 ${V}_{\\mathrm{{CC}}}$ 无关偏置的实现,其核心在于引入恒流源。偏置电路正是用来产生与 ${V}_{\\mathrm{{cc}}}$ 无关的电流偏置,而在偏置电路稳定之前,无法由外界提供独立的恒流源。最终,从逻辑关系上看,将电阻 ${R}_{1}$ 用恒流电流源代替, 必然引出基于电流镜相互偏置的电路结构。从水平方向划分, 电路由上下两个线性与非线性电流镜的互锁或互偏构成；纵向方面,电路可划分左右两个高低阻相互配合的支路,低阻结构通常采用栅的漏电位自偏结构。通常,与 ${V}_{\\mathrm{{cc}}}$ 无关的基本偏置更关心其动态小信号的电源抑制比。\n![0196aaa2-bbe2-70ee-823d-d4abf5c67805_51_707_523_714_481_0.jpg](images/0196aaa2-bbe2-70ee-823d-d4abf5c67805_51_707_523_714_481_0.jpg)\n图 3-6 采用互偏置的 ${V}_{\\mathrm{{TH}}}$ 偏置电路\n基于与 MOS 管恒流控制机制的类比,得到图 3-6 所示的两电流镜相互作用的偏置结构。在两条支路中, 任何一条支路中都存在一个由恒流源构成的高阻与一个 MOS 二极管低阻的串联匹配结构, 电源电压中超出夹断电压的分量或电源噪声主要降落在恒流 MOS 管的 ${V}_{\\mathrm{{DS}}}$ 上。只要饱和区内 ${V}_{\\mathrm{{DS}}}$ 的变化引起的电流变化很小,即可实现提高偏置电路 PSRR 性能的目标。\n${V}_{\\mathrm{{TH}}}$ 偏置电压及电流稳定性的改善可采用如图 3-6(b) 所示的电流镜互偏结构。注意 PMOS 电流镜的接法,其中 ${\\mathrm{M}}_{1}$ 的输出阻抗代替原来的电阻 ${R}_{1}$ ,因此 ${\\mathrm{M}}_{1}$ 必须是输出高阻, 这样只能 ${\\mathrm{M}}_{2}$ 管接成 $\\mathrm{{MOS}}$ 二极管的形式。如果电流镜接成图 3-6(a) 的形式,则左边支路都为低阻的串联, ${V}_{\\mathrm{{CC}}}$ 电压变化将导致输入支路电流的很大变化,只有图 3-6(b) 所示的连接方法, 可以满足互偏置结构每条支路的阻抗匹配要求, 此时 (3-16) 和 (3-17) 两式成立, 通过合适的电阻 $R$ 和 $W/L$ 设计,最终获得所需的稳定电流输出。\n很明显, ${V}_{\\mathrm{{TH}}}$ 偏置电路是由 PMOS 与 NMOS 上下两个电流镜相互耦合而构成,为了获得非零电流的静态工作点,其中一个为线性电流源,与之对应的另一个则必然为非线性电流源。因此, 支路电流为零的静态点也是偏置电路一个可能状态。一个静态偏置电路的设计需要考虑动态过程, 包括上电启动过程的正反馈控制以及平衡点扰动下的负反馈稳定。图 $3 - 7$ 给出了一种包含启动电路的 ${V}_{\\mathrm{{TH}}}$ 互偏置电路。正是由于非线性结构的引入,才导致了不同范围和条件下系统不同的反馈控制机制。初始为正反馈,平衡点下为负反馈,最后达到并稳定在具有额定电流和电压输出的唯一静态工作点。\n![0196aaa2-bbe2-70ee-823d-d4abf5c67805_51_264_1705_1039_378_0.jpg](images/0196aaa2-bbe2-70ee-823d-d4abf5c67805_51_264_1705_1039_378_0.jpg)\n图 3-7 含启动电路的 ${V}_{\\mathrm{{TH}}}$ 互偏置电路应用\n#### 3.4.2 输出阻抗倍增效应\n${V}_{\\mathrm{{TH}}}$ 偏置电路中的电阻 $R$ 除了起支路电流定义的作用外,还通过 CG MOS 管的电压转换作用实现支路输出阻抗的倍增效应。电阻 ${R}_{\\mathrm{L}}$ 的一端接地,另一端接 CG NMOS 管的源端,其电位为 ${V}_{\\mathrm{y}}$ ,而对应的输出电压变化为 ${V}_{\\mathrm{x}}$ ,近似分析表明, $\\mathrm{{CG}}$ 管 ${V}_{\\mathrm{y}}$ 和 ${V}_{\\mathrm{x}}$ 之间满足本征增益的关系,即 ${V}_{\\mathrm{x}}/{V}_{\\mathrm{y}} = {g}_{\\mathrm{m}}{r}_{\\mathrm{o}}$ ,则 ${V}_{\\mathrm{x}}$ 点到地的输出阻抗近似为\n$$\n{R}_{\\mathrm{o}} = \\frac{{V}_{\\mathrm{x}}}{{i}_{\\mathrm{x}}} = \\frac{{g}_{\\mathrm{m}}{r}_{\\mathrm{o}}{V}_{\\mathrm{y}}}{{i}_{\\mathrm{R}}} = {g}_{\\mathrm{m}}{r}_{\\mathrm{o}}R = {A}_{\\mathrm{v} - \\mathrm{{CG}}}R \\tag{3 - 19}\n$$\n式中输出阻抗 ${R}_{\\mathrm{o}}$ 为电流定义电阻 $R$ 的 $\\mathrm{{CG}}$ 增益 ${A}_{{}^{\\psi }\\_ \\mathrm{{CG}}}$ 倍。采用等效电路法求出的输出阻抗其精确值为 ${R}_{o} = R + {r}_{o} + {g}_{m}{r}_{o}R$ 。显然,只有当 $R$ 很小使 ${g}_{m}R \\ll  1$ 时,输出阻抗才下降到最小的 ${R}_{\\mathrm{o}} = {r}_{\\mathrm{o}} + R$ ,输出阻抗的倍增调制效应消失,两串联电阻的作用逐渐显现。\n如果将电阻 $R$ 用恒流 $\\mathrm{{MOS}}$ 管代替,倍增效应更容易实现,即形成 Cascode 输出阻抗倍增效应,进一步采用如图 3-8(a) 所示的三级 Cascode 结构,输出阻抗则还将提高至少一个量级以上。但串联的 MOS 管越多,最低电源电压越高,动态范围越窄。\n![0196aaa2-bbe2-70ee-823d-d4abf5c67805_52_312_959_940_651_0.jpg](images/0196aaa2-bbe2-70ee-823d-d4abf5c67805_52_312_959_940_651_0.jpg)\n图 3-8 输出阻抗倍增电流源\n从多级 Cascode 的输出电阻受到启发,如图 3-8(b) 所示,若仍然采用基本的输出阻抗倍增结构,如采用辅助放大电路的反馈控制使 ${\\mathrm{M}}_{2}$ Cascode 管的有效跨导 ${g}_{\\mathrm{m}2}$ 增加 $A$ 倍,仍能达到与多级 Cascode 相同的增益倍增效果。\n辅助放大可采用普通的负反馈电压放大器或差分运放电路。当采用差分运放时,同相端接参考信号,反向端接电阻反馈信号以确保 ${\\mathrm{M}}_{2}$ 源栅之间为负反馈。在输入相同 ${V}_{\\mathrm{i}}$ 条件下 ${V}_{\\mathrm{{GS}}}$ 增加到原来的 $1 + A$ 倍,等效于 ${g}_{\\mathrm{m}}$ 增加到原来的 $1 + A$ 倍,即 ${G}_{\\mathrm{m}} = \\left( {A + 1}\\right) {g}_{\\mathrm{m}2}$ ,输出阻抗近似为\n$$\n{r}_{\\mathrm{o}} = {r}_{\\mathrm{{dsl}}} + {r}_{\\mathrm{{ds}}2} + \\left( {1 + A}\\right) {g}_{\\mathrm{m}}{r}_{\\mathrm{{ds}}2}{r}_{\\mathrm{{dsl}}} \\approx  \\left( {1 + A}\\right) {g}_{\\mathrm{m}}{r}_{\\mathrm{{dsl}}}{r}_{\\mathrm{{ds}}2} \\tag{3 - 20}\n$$\n有效跨导增加,等效于输入电阻减小, ${r}_{\\mathrm{{in}}} \\approx  1/{G}_{\\mathrm{m}}$ ,输入更有利于驱动电流信号。由于运放 $\\mathrm{A}$ 与 ${\\mathrm{M}}_{2}$ 为并联而非串联关系,则输出摆幅性能得到基本保证。\n输出阻抗的倍增使电流源的 PSRR 进一步提高, 电流稳定性提高。在实际应用中, 实现阻抗倍增的运放可简化为普通结构放大器,但需保持输入一输出之间的反相关系,可采用 CS 增益结构。实际上,在 Wilson 以及 ${V}_{\\mathrm{{TH}}}$ 偏置的电流源中,非线性电流源左右两支路中, 其动态控制的本质就是如图 3-8 所示的由增益控制的阻抗倍增关系。\n#### 3.4.3 ${V}_{\\mathrm{{TH}}}$ 互偏置电路改进\n基于恒流互偏置的 ${V}_{\\mathrm{{TH}}}$ 电路基本解决了偏置支路电流与 ${V}_{\\mathrm{{CC}}}$ 的稳定性问题,但并没有解决互偏置两支路间电流的匹配性要求。如图 3-9(a) 所示,两支路电流的失配主要是由线性电流镜两 $\\mathrm{{MOS}}$ 管 ${\\mathrm{M}}_{1}$ 和 ${\\mathrm{M}}_{2}$ 的 ${V}_{\\mathrm{{DS}}}$ 电压非严格匹配引起。解决的方法就是通过引入附加的 ${\\mathrm{M}}_{5}$ 管, 降低 ${\\mathrm{M}}_{1}$ 管 ${\\mathrm{V}}_{\\mathrm{{DS}}}$ 压降使之与 ${\\mathrm{M}}_{2}$ 的 ${\\mathrm{V}}_{\\mathrm{{DS}}}$ 近似相等,如图 3-9(b) 所示。该结构适合电源电压较高的偏置电路应用领域。\n![0196aaa2-bbe2-70ee-823d-d4abf5c67805_53_732_695_703_463_0.jpg](images/0196aaa2-bbe2-70ee-823d-d4abf5c67805_53_732_695_703_463_0.jpg)\n图 3-9 基于 ${V}_{\\mathrm{{DS}}}$ 近似匹配的 ${V}_{\\mathrm{{TH}}}$ 偏置电路\n将右图电路中的电阻用 $1/{g}_{\\mathrm{m}}$ 的 MOS二极管电阻代替, 即可得到如图 3-10所示的偏置结构。为了保持原有电路的非线性关系,需要在 ${\\mathrm{M}}_{3}$ 的源极或者在 ${\\mathrm{M}}_{1}$ 的源端额外串联电阻 $R$ 。电阻位置的设计一方面要满足非线性控制要求,另一方面也要满足实现动态控制的要求,即启动初始阶段为正反馈,以利于激励启动,稳定阶段为负反馈,以利于平衡点的稳定。因此, ${\\mathrm{M}}_{3} + R$ 与 ${\\mathrm{M}}_{4}$ 构成的非线性电流镜称为 Wilson 电流镜,或非线性微电流镜。\n![0196aaa2-bbe2-70ee-823d-d4abf5c67805_53_398_1449_781_496_0.jpg](images/0196aaa2-bbe2-70ee-823d-d4abf5c67805_53_398_1449_781_496_0.jpg)\n图 3-10 Wilson 电路及其改进的偏置电路\n基本的 Wilson 电流镜解决了输出阻抗的问题, 但同样没有解决输入一输出电流源严格匹配的问题。改进的 Wilson 电流源通过使工作点匹配, 提高了电流源的匹配精度。图 3-10中 ${\\mathrm{M}}_{6}$ 管引入一移位电平,使 ${\\mathrm{M}}_{1}$ 和 ${\\mathrm{M}}_{2}$ 管的漏电位趋向一致,提高了两路支路电流的匹配精度,其动态的反馈控制过程与基本的 Wilson 电流镜完全相同。\n电路中引入了负反馈 (增益) 控制以稳定输出工作点,极大地提高了输出阻抗。以下从两个方面分析电路输出阻抗,以深入理解电路的内在控制机制和电路特点。\n首先,采用基于等效电路的输出阻抗计算方法,通过反馈控制过程的分析,以期获得精确的结果。根据基本电路结构,列出以下两个控制方程。 ${\\mathrm{M}}_{4}$ 管输出阻抗近似为 $1/{g}_{\\mathrm{m}4}$ ,则其流过的总电流形成的电压变化 $\\mathrm{d}{V}_{1}$ 为\n$$\n\\mathrm{d}{V}_{1} = \\left\\lbrack  {\\frac{\\mathrm{d}V - \\mathrm{d}{V}_{1}}{{r}_{\\mathrm{o}5}} + {g}_{\\mathrm{m}5}\\left( {\\mathrm{\\;d}{V}_{2} - \\mathrm{d}{V}_{1}}\\right) }\\right\\rbrack  \\frac{1}{{g}_{\\mathrm{m}4}} \\tag{3 - 21}\n$$\n假设支路电流定义电阻 $R$ 位于 ${\\mathrm{M}}_{3}$ 管的源端,则 ${\\mathrm{M}}_{3}$ 管 $\\mathrm{d}{V}_{2}$ 的电压变化由 $\\mathrm{d}{V}_{1}$ 的输入电压经 ${\\mathrm{M}}_{3}$ 管的 $\\mathrm{{CS}}$ 放大后得到,即\n$$\n\\mathrm{d}{V}_{2} =  - {g}_{\\mathrm{m}3}\\mathrm{\\;d}{V}_{1}{r}_{\\mathrm{o}3} \\tag{3 - 22}\n$$\n将以上两式合并后得到\n$$\n{g}_{m4}d{V}_{1} = \\frac{{dV} - d{V}_{1}}{{r}_{o5}} - {g}_{m5}\\left( {{g}_{m3}d{V}_{1}{r}_{o3} + d{V}_{1}}\\right)  = \\frac{dV}{{r}_{o5}} - \\left( {\\frac{1}{{r}_{o5}} + {g}_{m3}{g}_{m5}{r}_{o3} + {g}_{m5}}\\right) d{V}_{1}\n$$\n(3 - 23)\n由此解得电流镜 $\\mathrm{d}V$ 端到 $\\mathrm{{GND}}$ 的单端输出阻抗为\n$$\n{r}_{\\mathrm{o}} = \\frac{\\mathrm{d}V}{\\mathrm{\\;d}i} = \\frac{\\mathrm{d}V}{\\mathrm{\\;d}{V}_{1}/\\left( {1/{g}_{\\mathrm{m}4}}\\right) } = \\frac{1}{{g}_{\\mathrm{m}4}}{r}_{\\mathrm{o}5}\\left( {{g}_{\\mathrm{m}4} + {g}_{\\mathrm{m}5} + {g}_{\\mathrm{m}3}{g}_{\\mathrm{m}5}{r}_{\\mathrm{o}3} + \\frac{1}{{r}_{\\mathrm{o}5}}}\\right)\n$$\n$$\n= {r}_{\\mathrm{o}5} + \\frac{1}{{g}_{\\mathrm{m}4}} + \\frac{{g}_{\\mathrm{m}5}}{{g}_{\\mathrm{m}4}}{r}_{\\mathrm{o}5} + \\frac{1}{{g}_{\\mathrm{m}4}}{g}_{\\mathrm{m}5}{r}_{\\mathrm{o}5}{g}_{\\mathrm{m}3}{r}_{\\mathrm{o}3} \\tag{3 - 24}\n$$\n在增益 ${A}_{\\mathrm{v}3} = {g}_{\\mathrm{m}3}{r}_{\\mathrm{o}3} \\gg  1$ 以及 ${g}_{\\mathrm{m}4} \\approx  {g}_{\\mathrm{m}5}$ 的条件下,输出阻抗近似为 ${r}_{\\mathrm{o}} \\approx  {A}_{\\mathrm{v}3}{r}_{\\mathrm{o}5}$ 。从基本的物理概念出发进行简化分析, 可避免采用以上复杂等效电路的计算方法。设底部恒流源电阻为 $R = 1/{g}_{\\mathrm{m}4}$ ,上端 Cascode 电流源阻抗为 ${r}_{\\mathrm{o}5}$ ,当交流电压 $\\mathrm{d}V$ 加在 Cascode 电流镜上时,在电阻 $R$ 上的分压为 $\\mathrm{d}{V}_{1}$ , Cascode 管为恒压偏置,则输出阻抗近似有\n$$\n{r}_{\\mathrm{o}} = \\frac{\\mathrm{d}V}{\\mathrm{\\;d}i} = \\frac{\\mathrm{d}V}{\\mathrm{\\;d}{V}_{1}/R} = R\\frac{\\mathrm{d}V}{\\mathrm{\\;d}{V}_{1}} = \\frac{1}{{g}_{\\mathrm{m}4}}\\frac{\\mathrm{d}V}{\\mathrm{\\;d}{V}_{2}}\\frac{\\mathrm{d}{V}_{2}}{\\mathrm{\\;d}{V}_{1}} = \\frac{{g}_{\\mathrm{m}5}{r}_{\\mathrm{o}5}{g}_{\\mathrm{m}3}{r}_{\\mathrm{o}3}}{{g}_{\\mathrm{m}4}} \\approx  {A}_{\\mathrm{v}3}{r}_{\\mathrm{o}5} \\tag{3 - 25}\n$$\n因此,在 Cascode 结构中,当反馈限流电阻为恒流电阻 $R = {r}_{\\mathrm{o}}$ 时,得到与式 (3-25) 相同的输出阻抗结果。而在以上 Wilson 结构中,虽然反馈电阻为低阻 $R = 1/{g}_{\\mathrm{m}}$ 而非高阻,仍然得到相同的输出结果,其根源在于 $\\mathrm{d}V/\\mathrm{d}{V}_{1}$ 的计算上。实际上,正是由于 ${\\mathrm{M}}_{4}$ 的电流镜耦合作用,在 ${\\mathrm{M}}_{5}$ 管 $\\mathrm{{CG}}$ 输入信号控制方面存在两条信号传输通路。虽然 Cascode 中的底层电阻为 $1/{g}_{\\mathrm{m}}$ 的低阻,但由于反馈控制的作用,输出阻抗等效于 Cascode 底层电阻为单管恒流高阻但无反馈控制的输出阻抗。\nWilson 结构中,由于 ${\\mathrm{M}}_{4}$ 为 $\\mathrm{{MOS}}$ 二极管,除了一级 $\\mathrm{{CG}}$ 增益外,还有一路 $\\mathrm{{CS}} + \\mathrm{{CS}}$ 的两级增益通路,使原来 ${\\mathrm{M}}_{5}$ 管的 $\\mathrm{{CG}}$ 总增益倍增为\n$$\n{A}_{\\mathrm{{CG}}5} = \\left( {-{g}_{\\mathrm{m}3}{r}_{\\mathrm{o}3}}\\right) \\left( {-{g}_{\\mathrm{m}5}{r}_{\\mathrm{o}5}}\\right)  = {g}_{\\mathrm{m}3}{g}_{\\mathrm{m}5}{r}_{\\mathrm{o}3}{r}_{\\mathrm{o}5} = {A}_{\\mathrm{v}3}{A}_{\\mathrm{v}5} \\tag{3 - 26}\n$$\n该增益比无反馈控制的情况增加了 ${A}_{\\cdot 5} = {g}_{\\mathrm{m}5}{r}_{\\mathrm{o}5}$ 倍,正好弥补了反馈阻抗 $1/{g}_{\\mathrm{m}4}$ 的不足,获得与恒流限制电阻 ${r}_{\\mathrm{o}}$ 相同的结果,即输出阻抗的计算在不同的限流电阻下基本相同,即\n$$\n{r}_{\\mathrm{o}} = \\frac{1}{{g}_{\\mathrm{m}}}{A}_{\\mathrm{v}3}{A}_{\\mathrm{v}5}{}^{\\prime } \\approx  {A}_{\\mathrm{v}5}{}^{\\prime }{r}_{\\mathrm{o}} = {g}_{\\mathrm{m}}{r}_{\\mathrm{o}}^{2} \\tag{3 - 27}\n$$\n以上基于反馈控制的电流源分析,将引出下文所讨论的基于 Regulated 调节的 Cascode 高输出阻抗电流源的控制结构。"
}