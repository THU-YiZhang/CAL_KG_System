{
  "section_num": "10.3",
  "title": "大信号瞬态特性与建立时间",
  "start_line": 8423,
  "end_line": 8560,
  "content": "### 10.3 大信号瞬态特性与建立时间\n在差分运放实际阶跃响应的初始状态下, 运放输入为典型的大信号, 使电路开始阶段处于压摆率控制的充放电状态。随着输出电压的变化, 运放的差分输入向逐步减小的方向变化。当 ${V}_{\\mathrm{{id}}}$ 降低到某一临界值即进入临界动态范围内后,运放逐步进入小信号线性放大区, 此时输出电压的瞬态变化受电路中的零一极点控制。因此,实际的瞬态输出响应必须考虑以上两种控制机制的共同作用。\n#### 10.3.1 大信号瞬态特性\n首先考虑 $\\mathrm{{SR}}$ 控制,这是一种恒流充放电控制机制。根据 ${C}_{\\mathrm{L},\\mathrm{{eff}}}\\left( {\\mathrm{d}{V}_{\\mathrm{o}}/\\mathrm{d}t}\\right)  = I$ 的关系,在恒定尾电流 ${I}_{\\mathrm{{SS}}}$ 的恒流驱动下,由于 $\\mathrm{{SR}} = {\\mathrm{{dV}}}_{ \\circ  }/\\mathrm{d}t = {I}_{\\mathrm{{SS}}}/{C}_{\\mathrm{{Leff}}}$ ,设运放输入的初始电压差为 ${V}_{\\mathrm{{id}}}\\left( 0\\right)  = {V}_{\\mathrm{{io}}}$ , $\\mathrm{{SR}}$ 结束后对应的差分电压范围为 ${V}_{\\mathrm{{id}}\\max }$ 。运放输入信号的动态范围为\n$$\n{\\Delta }_{\\max } = {V}_{\\mathrm{{GS}}1} - {V}_{\\mathrm{{GS}}2} = {V}_{\\mathrm{{TH}}} + {\\Delta }_{1} - \\left( {{V}_{\\mathrm{{TH}}} + {\\Delta }_{2}}\\right)  = {\\Delta }_{1} - {\\Delta }_{2} = \\sqrt{\\frac{2{I}_{\\mathrm{{SS}}}}{k}} \\tag{10 - 37}\n$$\n在最大动态范围的边缘,一个 MOS 管截止 $\\left( {\\Delta  = 0}\\right)$ ,另一个 MOS 管流过全部尾电流 $\\left( {\\Delta  = {\\Delta }_{\\max }}\\right)$ ,最大动态范围由式 (10-37) 决定。若近似认为线性范围等同于动态范围,在 ${V}^{ + } =$ ${V}_{\\text{io }}$ 的输入下, ${V}^{ - }$ 接反馈输出,当输入 ${V}_{\\text{i }}$ 发生跳变后,运放进入小信号工作状态时所对应输入电压的变化为 $\\Delta {V}_{\\mathrm{i}} = {V}_{\\mathrm{i}} - {\\Delta }_{\\max }$ ,输入和输出的变化量与反馈系数 $F$ 相联系,即 $\\Delta {V}_{\\mathrm{i}} = {F\\Delta }{V}_{\\mathrm{o}}$ 。在进入线性区之前,在此初始 $\\mathrm{{SR}}$ 阶段输入电压的变化 $\\Delta {V}_{0}$ 所需的过渡时间为\n$$\n{T}_{\\text{slew }} = \\frac{\\Delta {V}_{\\mathrm{o}}}{\\mathrm{{SR}}} = \\frac{{C}_{\\mathrm{L}\\text{ eff }}}{{I}_{\\mathrm{{SS}}}}\\frac{\\Delta {V}_{\\mathrm{i}}}{F} = \\frac{{C}_{\\mathrm{L}\\text{ eff }}}{{I}_{\\mathrm{{SS}}}}\\frac{{V}_{\\mathrm{i}} - {\\Delta }_{\\max }}{F} = \\frac{{C}_{\\mathrm{L}\\text{ eff }}}{{I}_{\\mathrm{{SS}}}}\\frac{{V}_{\\mathrm{i},\\text{ step }}}{F}\\left( {1 - \\frac{{\\Delta }_{\\max }}{{V}_{\\mathrm{i},\\text{ step }}}}\\right)  \\tag{10 - 38}\n$$\n式中, ${V}_{\\mathrm{i},\\text{ step }}$ 为输入信号的大信号变化量。\n在求出 ${T}_{\\text{slew }}$ 后,当 $t > {T}_{\\text{slew }}$ 时输出电压可以采用前文讨论的小信号瞬态模型表示,因此小信号模型的有效作用区为 $t > {T}_{\\text{slew }}$ 。考虑到大、小信号充放电速度的不同,经过相同时间后两种机制下的输出电压不同,将初始的 SR 控制等效成小信号控制,则在相同的临界状态输出电压下,大信号延迟 ${T}_{\\text{slew }}$ 等效成小信号延迟 ${t}_{0}$ 。即小信号模型在 ${t}_{0}$ 时刻输出与大信号模型在 ${T}_{\\text{slew }}$ 时刻的输出相等,求出 ${t}_{0}$ 。在 $t > {t}_{0}$ 后,小信号模型自动有效,时间变量 $t$ 由 $t -$ $\\left( {{T}_{\\text{slew }} - {t}_{0}}\\right)$ 取代,这样整个过程的模型描述闭合,并全部可由小信号瞬态模型等效。\n#### 10.3.2 建立时间\n根据以上不同条件下瞬态特性的分析以及模型整合需要,建立统一的瞬态响应模型. 可以计算不同状态下闭环运放的建立时间,以确保系统的速度性能满足特定应用的要求。\n## 1)单极点闭环系统的建立时间 ${\\mathbf{T}}_{\\text{set }}$\n设运放在阶跃激励下的初始输入电压跳变 ${V}_{\\mathrm{i},\\text{step }}$ ,反馈系数 $F \\leq  1$ ,则闭环归一化输出瞬态特性的模型为\n$$\n{V}_{o\\_ \\text{scale }}\\left( t\\right)  = \\frac{{V}_{o,\\text{ step }}\\left( t\\right) }{{A}_{\\mathrm{{cf}}}\\left( 0\\right) {V}_{i,\\text{ step }}} = 1 - \\exp \\left\\lbrack  {-F \\cdot  {p}_{1}\\left( {t - \\left( {{T}_{\\text{slew }} - {t}_{0}}\\right) }\\right) }\\right\\rbrack\n$$\n$$\n= 1 - \\exp \\left\\lbrack  {-\\frac{t - \\left( {{T}_{\\text{slew }} - {t}_{0}}\\right) }{\\tau }}\\right\\rbrack   \\tag{10 - 39}\n$$\n式中, ${p}_{1}$ 为闭环主极点即开环 $\\mathrm{{GBW}},\\tau  = 1/\\left( {F{p}_{1}}\\right)  = {C}_{\\text{Leff }}/\\left( {F{g}_{\\mathrm{m}}}\\right)$ 。\n根据 $t = {T}_{\\text{slew }}$ 时的输出 ${V}_{\\text{o_scale }}\\left( {T}_{\\text{slew }}\\right)$ ,求得\n$$\n\\exp \\left( {-\\frac{{t}_{0}}{\\tau }}\\right)  = 1 - {V}_{\\text{o_scale }}\\left( {T}_{\\text{slew }}\\right)  = 1 - \\frac{\\left| {V}_{\\text{i.step }}\\right|  - {\\Delta }_{\\max }}{F \\cdot  {A}_{\\mathrm{{cf}}}\\left( 0\\right) {V}_{\\text{i., step }}} \\tag{10 - 40}\n$$\n由此得到的输出电压瞬态变化规律为\n$$\n{V}_{o\\_ \\text{scale }} = 1 - \\left\\lbrack  {1 - \\frac{1}{F \\cdot  {A}_{\\mathrm{{cf}}}\\left( 0\\right) }\\left( {1 - \\frac{{\\Delta }_{\\max }}{{V}_{\\mathrm{i},\\text{ step }}}}\\right) }\\right\\rbrack  \\exp \\left( {-\\frac{t - {T}_{\\text{slew }}}{\\tau }}\\right)  \\tag{10 - 41}\n$$\n输出达到额定值所需的时间为\n$$\nt = {T}_{\\text{slew }} + \\tau \\ln \\left( {1 - \\frac{1 - {\\Delta }_{\\max }/{V}_{\\text{i, step }}}{F \\cdot  {A}_{\\mathrm{{cf}}}\\left( 0\\right) }}\\right)  - \\tau \\ln \\left( {1 - {V}_{\\text{o_scale }}}\\right)  = {T}_{\\text{slew }} + {T}_{\\text{linear }} \\tag{10 - 42}\n$$\n在 $F \\cdot  {A}_{\\mathrm{{cf}}}\\left( 0\\right)  \\approx  1$ 的条件下,有\n$$\n{T}_{\\text{set }} = {T}_{\\text{slew }} + \\tau \\ln \\left( \\frac{{\\Delta }_{\\max }/{V}_{\\mathrm{i},\\text{ step }}}{1 - {V}_{\\mathrm{o}\\text{_scale }}}\\right)  = {T}_{\\text{slew }} + {T}_{\\text{linear }} \\tag{10 - 43}\n$$\n在 ${V}_{i,\\text{ step }} \\geq  {\\Delta }_{\\max }$ 条件下存在的大信号建立时间由压摆率建立时间即(10 - 38)式计算得到,增加反馈系数 $F$ 和尾电流 ${I}_{\\mathrm{{SS}}}$ ,降低输入摆幅和负载电容,均有利于降低大信号建立时间。以 ${0.1}\\%$ 的输出电压精度为例,在 ${\\Delta }_{\\max } = {0.2}\\mathrm{\\;V},{V}_{i,\\text{ step }} = 1\\mathrm{\\;V}$ 的条件下,小信号的线性建立时间约为 ${5.3\\tau }$ ,则总的建立时间近似为\n$$\n{T}_{\\text{set }} = \\frac{{C}_{\\mathrm{L}\\text{. eff }}}{{I}_{\\mathrm{{SS}}}}\\frac{{V}_{\\mathrm{i},\\text{ step }}}{F}{0.8} + {5.3}\\frac{{C}_{\\mathrm{L}\\text{. eff }}}{F{g}_{\\mathrm{m}}} \\approx  \\frac{{C}_{\\mathrm{L}\\text{ eff }}}{F}\\left( {\\frac{0.8V}{{I}_{\\mathrm{{SS}}}} + \\frac{5.3}{{g}_{\\mathrm{m}}}}\\right)  \\tag{10 - 44}\n$$\n大信号过渡范围大,虽然充放电速度快,但延迟不可忽略；小信号过渡范围小,但充放电速度慢,同样不可忽略。通常条件下,必须考虑大信号与小信号瞬态变化引起的总时延。\n## 2)分离双实极点闭环系统的建立时间 ${T}_{\\text{set }}$\n在闭环条件下,当次极点远大于 $\\mathrm{{GBW}}$ 而忽略后,可近似为一阶模型。实际上,次极点对输出存在一定的影响, 需要对一阶模型适当修正。分离次极点的存在对输出瞬态的误差有减小作用,因此 ${p}_{2}$ 的存在可使输出的上升速度加快。然而,当 ${p}_{2}$ 小到一定程度导致复极点产生并形成过冲后,建立时间反而增大。因此,存在某一合适的次极点频率,可使达到额定误差条件下的线性建立时间最小。\n该最小建立时间与设定的误差范围有关, 直观上看, 轻微的过冲可能有利于建立时间的下降。在以上 ${0.1}\\%$ 的相对误差下 (不考虑 SR 作用),最小的线性建立时间发生在 $\\zeta  \\approx  {0.9}$ 的轻微欠阻尼振荡的条件下。以下讨论一般条件下欠阻尼振荡状态所对应总建立时间的计算。\n## 3) 共轭复极点闭环系统的建立时间 ${\\mathbf{T}}_{\\text{set }}$\n参照单极点大小信号瞬态统一模型的建立过程,则在 $\\zeta  < 1$ 下,一对共轭复极点的统一瞬态模型可表示为\n$$\n{V}_{{o}_{1}\\text{scale }}\\left( t\\right)  = 1 - \\frac{\\left\\lbrack  1 - \\frac{1}{F \\cdot  {A}_{\\mathrm{{cl}}}\\left( 0\\right) }\\left( 1 - \\frac{{\\Delta }_{\\max }}{{V}_{i,\\text{ step }}}\\right) \\right\\rbrack  }{\\sqrt{1 - {\\zeta }^{2}}}\\frac{\\sin \\left\\lbrack  {{\\omega }_{0}\\sqrt{1 - {\\zeta }^{2}}\\left( {t - {T}_{\\text{slew }}}\\right)  + \\varphi }\\right\\rbrack  }{\\exp \\left\\lbrack  {\\zeta {\\omega }_{0}\\left( {t - {T}_{\\text{slew }}}\\right) }\\right\\rbrack  }\n$$\n(10 - 45)\n显然, 欠阻尼振荡峰值下的频率及其所对应的时间为\n$$\n{f}_{\\mathrm{m}} = 2\\frac{{\\omega }_{0}\\sqrt{1 - {\\zeta }^{2}}}{2\\pi } = \\frac{{\\omega }_{0}\\sqrt{1 - {\\zeta }^{2}}}{\\pi },{T}_{\\mathrm{d}} = \\frac{1}{{f}_{\\mathrm{m}}} = \\frac{\\pi }{{\\omega }_{0}\\sqrt{1 - {\\zeta }^{2}}} \\tag{10 - 46}\n$$\n将式 (10-45) 中的输出对时间 ${t}^{\\prime } = t - {T}_{\\text{slew }}$ 求偏导,并令其偏导数为零,得到峰值状态发生时满足的关系为\n$$\n\\tan \\left( {{\\omega }_{0}\\sqrt{1 - {\\zeta }^{2}}{t}^{\\prime } + \\varphi }\\right)  = \\frac{\\sqrt{1 - {\\zeta }^{2}}}{\\zeta } = \\tan \\varphi  \\tag{10 - 47}\n$$\n由于正切函数 $\\tan x = \\tan \\left( {{n\\pi } + x}\\right)$ 以 $\\pi$ 为周期,由此得到\n$$\n{\\omega }_{0}\\sqrt{1 - {\\zeta }^{2}}{t}^{\\prime } = {n\\pi } + \\arctan \\frac{\\sqrt{1 - {\\zeta }^{2}}}{\\zeta } - \\varphi  = {n\\pi } \\tag{10 - 48}\n$$\n式中 $n$ 为正整数, $n = 1$ 对应于第一个过冲峰值, $n = 2$ 对应于第一个下降峰值,依此类推。 在输出峰值下相对于额定输出的误差为\n$$\n\\text{ error } = \\left\\lbrack  {1 - \\frac{1}{F \\cdot  {A}_{\\mathrm{{cl}}}\\left( 0\\right) }\\left( {1 - \\frac{{\\Delta }_{\\max }}{{V}_{\\mathrm{i}\\text{, step }}}}\\right) }\\right\\rbrack  \\frac{1}{\\sqrt{1 - {\\zeta }^{2}}}\\exp \\left( {-\\zeta \\frac{n\\pi }{\\sqrt{1 - {\\zeta }^{2}}}}\\right) \\sin \\left( {{n\\pi } + \\varphi }\\right)\n$$\n$$\n=  \\mp  \\left\\lbrack  {1 - \\frac{1}{F \\cdot  {A}_{\\mathrm{{cl}}}\\left( 0\\right) }\\left( {1 - \\frac{{\\Delta }_{\\max }}{{V}_{\\mathrm{i},\\text{ step }}}}\\right) }\\right\\rbrack  \\exp \\left( {-\\frac{n\\zeta \\pi }{\\sqrt{1 - {\\zeta }^{2}}}}\\right)  \\approx  m\\frac{{\\Delta }_{\\max }}{{V}_{\\mathrm{i},\\text{ step }}}\\exp \\left( {-\\frac{n\\zeta \\pi }{\\sqrt{1 - {\\zeta }^{2}}}}\\right)\n$$\n(10 - 49)\n式中负号对应于 $n$ 取奇数,正号对应于 $n$ 取偶数,随着 $n$ 的变化,正负峰值的幅度逐步减小。 若 $F \\cdot  {A}_{\\mathrm{{cl}}}\\left( 0\\right)  \\approx  1,{2}^{m}$ 转化精度所对应的相对误差 $\\left| \\text{error}\\right|  \\leq  {2}^{-m}$ ,由以上关系计算得到\n$$\nn \\geq  \\frac{\\sqrt{1 - {\\zeta }^{2}}}{\\zeta \\pi }\\ln \\left( {{2}^{m}\\frac{{\\Delta }_{\\max }}{{V}_{\\mathrm{i},\\text{ step }}}}\\right)  \\tag{10 - 50}\n$$\n包含大信号 SR 压摆率控制和小信号 GBW 控制的系统建立时间,由下式可得到\n$$\n{T}_{\\text{set }} = {T}_{\\text{slew }} + \\frac{n\\pi }{{\\omega }_{0}\\sqrt{1 - {\\zeta }^{2}}} = {T}_{\\text{slew }} + \\frac{n\\zeta \\pi }{\\sqrt{1 - {\\zeta }^{2}}}\\frac{1}{{\\omega }_{0}\\zeta } \\tag{10 - 51}\n$$\n代入以上 $n$ 值条件,在满足误差要求条件下的最小建立时间为\n$$\n{T}_{\\text{set }} = {T}_{\\text{slew }} + \\frac{1}{\\zeta {\\omega }_{0}}\\ln \\left( {{2}^{m}\\frac{{\\Delta }_{\\max }}{{V}_{\\mathrm{i},\\text{ step }}}}\\right)  \\tag{10 - 52}\n$$\n共轭复极点的实部 $\\zeta {\\omega }_{0}$ 越大,在相同的误差容限和输入摆幅条件下,欠阻尼振荡的线性建立时间越短。当 ${I}_{\\mathrm{{SS}}}$ 电流越大,大信号建立时间 ${T}_{\\mathrm{{slew}}}$ 也越小,同时导致 ${\\omega }_{0}$ 越大,总的延迟减小。"
}